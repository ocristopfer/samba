[global]
    # Basic server settings
    workgroup = WORKGROUP
    server string = Samba Docker Container
    server role = standalone server
    
    # Network and protocol settings
    security = user
    map to guest = never
    guest account = nobody
    
    # DNS and name resolution
    dns proxy = no
    name resolve order = bcast host
    
    # Logging configuration
    log file = /var/log/samba/log.%m
    max log size = 10000
    log level = 1
    logging = file
    
    # Performance optimizations
    socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=131072 SO_SNDBUF=131072
    deadtime = 30
    getwd cache = yes
    lpq cache time = 30
    max connections = 100
    
    # Security settings
    server signing = auto
    client signing = auto
    smb encrypt = auto
    restrict anonymous = 2
    
    # Disable unnecessary services for container
    load printers = no
    printing = bsd
    printcap name = /dev/null
    disable spoolss = yes
    show add printer wizard = no
    
    # User and password settings
    obey pam restrictions = yes
    unix password sync = no
    passwd program = /usr/bin/passwd %u
    passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
    pam password change = yes
    
    # Default file and directory permissions
    create mask = 0664
    force create mode = 0664
    directory mask = 0775
    force directory mode = 0775
    
    # Compatibility settings
    server min protocol = SMB2_02
    server max protocol = SMB3
    client max protocol = SMB3
    client min protocol = SMB2_02
    
    # Unicode and charset
    unix charset = UTF-8
    display charset = UTF-8
    dos charset = CP850

# Main shared directory accessible to all users
[shared]
    comment = Shared Directory for Multiple Users
    path = /shared
    
    # Access control
    browseable = yes
    writable = yes
    guest ok = no
    public = no
    
    # User access - allow all valid users
    valid users = @sambashare
    write list = @sambashare
    admin users = 
    
    # File and directory permissions
    create mask = 0664
    force create mode = 0664
    directory mask = 0775
    force directory mode = 0775
    
    # Ownership settings
    force user = 
    force group = sambashare
    
    # Performance and caching
    strict locking = no
    oplocks = yes
    level2 oplocks = yes
    kernel oplocks = no
    
    # Recycle bin (optional - uncomment to enable)
    # vfs objects = recycle
    # recycle:repository = .recycle
    # recycle:keeptree = yes
    # recycle:versions = yes
    # recycle:touch = yes
    # recycle:maxsixe = 0

# Example: Individual user directories (uncomment and customize as needed)
# [homes]
#     comment = User Home Directories
#     path = /shared/%U
#     browseable = no
#     writable = yes
#     guest ok = no
#     valid users = %S
#     create mask = 0600
#     directory mask = 0700
#     root preexec = /bin/mkdir -p /shared/%U
#     root preexec close = yes

# Example: Public read-only share (uncomment to enable)
# [public]
#     comment = Public Read-Only Share
#     path = /shared/public
#     browseable = yes
#     writable = no
#     guest ok = yes
#     public = yes
#     create mask = 0644
#     directory mask = 0755
#     root preexec = /bin/mkdir -p /shared/public
#     root preexec close = yes